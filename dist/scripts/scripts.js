!function(){"use strict";angular.module("wcui",["angularUtils.directives.dirPagination","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router"])}(),function(){"use strict";function a(a,b){return b.loadData(a.realm,a.character)}function b(a){return a.loadData()}function c(c,d){d.otherwise("/"),c.state("wcui",{"abstract":!0,resolve:{resolveMasterData:b}}).state("wcui.empty",{url:"/",views:{"wcui@":{templateUrl:"pages/empty/empty.html"}}}).state("wcui.error",{url:"/",views:{"wcui@":{templateUrl:"pages/error/error.html"}}}).state("wcui.tabs",{resolve:{resolveCharacter:a},url:"/:realm/:character",views:{"wcui@":{templateUrl:"pages/tabs/tabs.html",controller:"TabsController",controllerAs:"vm"}}}).state("wcui.tabs.pets",{url:"/pets",views:{"tab@wcui.tabs":{templateUrl:"pages/tabs/pets/pets.html",controller:"PetsController",controllerAs:"vm"}}}).state("wcui.tabs.mounts",{url:"/mounts",views:{"tab@wcui.tabs":{templateUrl:"pages/tabs/mounts/mounts.html",controller:"MountsController",controllerAs:"vm"}}}).state("wcui.tabs.toys",{url:"/toys",views:{"tab@wcui.tabs":{templateUrl:"pages/tabs/toys/toys.html",controller:"ToysController",controllerAs:"vm"}}})}angular.module("wcui").config(c),a.$inject=["$stateParams","characterFactory"],b.$inject=["masterFactory"],c.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){a.go("wcui.empty"),c.loadData(j.realm,j.character).then(h)["catch"](g)}function g(){a.go("wcui.error")}function h(){e.setActiveView(),a.go("wcui.tabs.pets",{realm:j.realm,character:j.character})}function i(){b.realm&&b.character&&(j.realm=stateParams.realm,j.character=stateParams.character,f())}var j=this;j.character="",j.data=d.data,j.realm="",j.getCharacter=f,function(){i()}()}angular.module("wcui").controller("HeaderController",a),a.$inject=["$state","$stateParams","characterFactory","masterFactory","utilFactory"]}(),function(){"use strict";function a(a,b,c){function d(){"wcui.tabs"==a.current.name&&a.go("wcui.tabs.pets")}var e=this;e.name=b.character.name,e.tab=c.viewState.tab,function(){d()}()}angular.module("wcui").controller("TabsController",a),a.$inject=["$state","characterFactory","utilFactory"]}(),function(){"use strict";function a(a,b,c){var d=this;d.character=a.character,d.data=b.data,function(){c.setActiveView("character")}()}angular.module("wcui").controller("CharacterController",a),a.$inject=["characterFactory","masterFactory","utilFactory"]}(),function(){"use strict";function a(a){!function(){a.setActiveView("mounts")}()}angular.module("wcui").controller("MountsController",a),a.$inject=["utilFactory"]}(),function(){"use strict";function a(a,b,c){function d(a){return a.stats.level<=t.levelMax.value}function e(a){return a.stats.level>=t.levelMin.value}function f(){t.filters=_.omit(t.filters,["uncollected","duplicate"]),t.filters.original?t.filters=_.omit(t.filters,["original"]):t.filters.original=!0,h()}function g(){t.filters=_.omit(t.filters,["original","uncollected"]),t.filters.duplicate?t.filters=_.omit(t.filters,["duplicate"]):t.filters.duplicate=!0,h()}function h(){t.pets.length=0,t.pets=t.pets.concat(w),t.pets=_.filter(t.pets,t.filters),t.pets=_.filter(t.pets,d),t.pets=_.filter(t.pets,e)}function i(a){t.filters.qualityId==a?t.filters=_.omit(t.filters,["qualityId"]):t.filters.qualityId=a,h()}function j(){t.filters=_.omit(t.filters,["original","duplicate"]),t.filters.uncollected?t.filters=_.omit(t.filters,["uncollected"]):t.filters.uncollected=!0,h()}function k(){var a=-1;a=_.findIndex(t.pets,{creatureId:71021}),a&&(t.pets[a].icon="warlock_summon_-voidlord"),a=_.findIndex(t.pets,{creatureId:83817}),a&&(t.pets[a].icon="inv_pet_-goat"),a=_.findIndex(t.pets,{creatureId:88814}),a&&(t.pets[a].icon="trade_archaeology_draenei-candelabra")}function l(a){var b="tile-"+a.theme;return b+=a.collected?" tile-border-solid":" tile-border-dashed"}function m(a){var b;switch(a.qualityId){case 4:case 3:b="primary";break;case 2:b="success";break;default:b="default"}return b}function n(){for(var a,b,c,d=0,e=v.length;e>d;d++)if(b=angular.copy(v[d]),a=_.filter(u,{creatureId:b.creatureId}),a.length)for(var f=0,g=a.length;g>f;f++)c=angular.copy(_.extend(b,a[f])),c.collected=!0,c.duplicate=f>0,c.uncollected=!1,c.original=0===f,c.theme=m(c),t.pets.push(c);else b.collected=!1,b.creatureName=b.name,b.uncollected=!0,b.theme=m(b),t.pets.push(b)}function o(){t.pageSize=t.pageSizeDefault}function p(){t.levelMax=t.levelsMax[25],h()}function q(){t.levelMin=t.levelsMin[0],h()}function r(a){t.pets=_.sortBy(t.pets,a)}function s(){t.showSettings=!t.showSettings}var t=this,u=a.character.pets.collected,v=b.data.pets,w=[];t.breeds=b.data.breeds,t.filters={stats:{}},t.levelMax={},t.levelMin={},t.levelsMax=c.getPetLevels(),t.levelsMin=c.getPetLevels(),t.pageSize=24,t.pageSizeDefault=24,t.pets=[],t.search="",t.showSettings=!1,t.filterCollected=f,t.filterDuplicate=g,t.filterUncollected=j,t.filterPets=h,t.filterQuality=i,t.getPetTile=l,t.setLevelMax=p,t.setLevelMin=q,t.resetPageSize=o,t.toggleSettings=s,function(){n(),k(),r(["creatureName"]),w=w.concat(t.pets),c.setActiveView("pets"),p(),q()}()}angular.module("wcui").controller("PetsController",a),a.$inject=["characterFactory","masterFactory","utilFactory"]}(),function(){"use strict";function a(a){!function(){a.setActiveView("toys")}()}angular.module("wcui").controller("ToysController",a),a.$inject=["utilFactory"]}(),function(){"use strict";var a={bnetKey:"eedv8cxqvh58re7gmfwhy5bhqbkcgwfh"};angular.module("wcui").constant("constants",a)}(),function(){"use strict";function a(a,b){function c(c,d){var e={method:"GET",url:"https://us.api.battle.net/wow/character/"+c+"/"+d+"?fields=pets,mounts&apikey="+a.bnetKey};return b.request(e)}function d(){var c={method:"GET",url:"https://us.api.battle.net/wow/pet/?fields=species&apikey="+a.bnetKey};return b.request(c)}function e(){var c={method:"GET",url:"https://us.api.battle.net/wow/realm/status?locale=en_US&apikey="+a.bnetKey};return b.request(c)}return{getCharacter:c,getPets:d,getRealms:e}}angular.module("wcui").factory("bnetFactory",a),a.$inject=["constants","httpFactory"]}(),function(){"use strict";function a(a,b){function c(b,c){return a.getCharacter(b,c).then(e)["catch"](d)}function d(a){throw a}function e(a){angular.copy(a.data,f),b.viewState.tab.pets.count=f.pets.collected.length,b.viewState.tab.mounts.count=f.mounts.collected.length,b.viewState.tab.toys.count=0}var f={};return{character:f,loadData:c}}angular.module("wcui").factory("characterFactory",a),a.$inject=["bnetFactory","utilFactory"]}(),function(){"use strict";function a(a,b){function c(c){var f=b.defer();return a(c).success(d(f)).error(e(f)),f.promise}function d(a){return function(b,c,d,e){var f={data:b,status:c,headers:d,config:e};a.resolve(f)}}function e(a){return function(b,c,d,e){var f={data:b,status:c,headers:d,config:e};throw a.reject(f)}}return{request:c}}angular.module("wcui").factory("httpFactory",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b,c){function d(){return a.all([g(),f(),e(),j()]).then(function(){l.loaded=!0})["catch"](function(){l.loaded=!1})}function e(){}function f(){return b.getPets().then(function(a){l.pets=a.data.pets})}function g(){return b.getRealms().then(h)["catch"](i)}function h(a){l.realms=a.data.realms}function i(a){console.log("loadRealms failed:"+a)}function j(){}var k={4:{letters:"P/P",gender:"male"},14:{letters:"P/P",gender:"female"},5:{letters:"S/S",gender:"male"},15:{letters:"S/S",gender:"female"},6:{letters:"H/H",gender:"male"},16:{letters:"H/H",gender:"female"},7:{letters:"H/P",gender:"male"},17:{letters:"H/P",gender:"female"},8:{letters:"P/S",gender:"male"},18:{letters:"P/S",gender:"female"},9:{letters:"H/S",gender:"male"},19:{letters:"H/S",gender:"female"},10:{letters:"P/B",gender:"male"},20:{letters:"P/B",gender:"female"},11:{letters:"S/B",gender:"male"},21:{letters:"S/B",gender:"female"},12:{letters:"H/B",gender:"male"},22:{letters:"H/B",gender:"female"},3:{letters:"B/B",gender:"male"},13:{letters:"B/B",gender:"female"}},l={breeds:k,loaded:!1,pets:[],mounts:[],realms:[],toys:[]};return{data:l,loadData:d}}angular.module("wcui").factory("masterFactory",a),a.$inject=["$q","bnetFactory","utilFactory"]}(),function(){"use strict";function a(){function a(){return[{value:0,text:"0"},{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"},{value:6,text:"6"},{value:7,text:"7"},{value:8,text:"8"},{value:9,text:"9"},{value:10,text:"10"},{value:11,text:"11"},{value:12,text:"12"},{value:13,text:"13"},{value:14,text:"14"},{value:15,text:"15"},{value:16,text:"16"},{value:17,text:"17"},{value:18,text:"18"},{value:19,text:"19"},{value:20,text:"20"},{value:21,text:"21"},{value:22,text:"22"},{value:23,text:"23"},{value:24,text:"24"},{value:25,text:"25"}]}function b(a){c.tab.character.active=!1,c.tab.pets.active=!1,c.tab.mounts.active=!1,c.tab.toys.active=!1,a&&(c.tab[a].active=!0)}var c={tab:{character:{active:!1},pets:{active:!1},mounts:{active:!1},toys:{active:!1}}};return{viewState:c,getPetLevels:a,setActiveView:b}}angular.module("wcui").factory("utilFactory",a)}(),angular.module("wcui").run(["$templateCache",function(a){"use strict";a.put("pages/empty/empty.html",'<div class="col-xs-12 text-center empty"> <div class="main">Hello fellow collector!</div> <div class="sub"> <span>welcome to</span> <img src="images/shift_p.a3737870.svg">, <span>please enter a realm and character name above</span> </div> </div>'),a.put("pages/error/error.html",'<div class="col-xs-12 text-center error"> <div class="text-danger main">Character not found!</div> <div class="sub">please re-enter a realm and character name above</div> <div class="typos">also..check for tpyos..</div> </div>'),a.put("pages/header/header.html",'<nav class="navbar navbar-default header"> <form class="navbar-form navbar-center" role="search"> <select class="form-control" data-ng-model="vm.realm" data-ng-options="realm.slug as realm.name for realm in vm.data.realms" placeholder="character realm"></select> <input class="form-control" data-ng-model="vm.character" placeholder="character name"> <button class="btn btn-success" data-ng-click="vm.getCharacter()" data-ng-disabled="!vm.realm || !vm.character"> Search </button> </form> </nav>'),a.put("pages/tabs/character/character.html",'<div class="character"> <div class="col-xs-12"> <p> Welcome to shift-p.net! Please , or if you are especially savvy, visit the repo and log an issue! </p> <div class="col-xs-12" style="border-bottom:1px solid grey"> <h1>{{vm.character.name}} of {{vm.character.realm}}</h1> </div> <div class="col-xs-2"> <img class="portrait-{{vm.character.class}}" src="http://us.battle.net/static-render/us/{{vm.character.thumbnail}}"> </div> <div class="col-xs-1"></div> <div class="col-xs-9"> <ul> <li>Pets: {{vm.character.pets.collected.length}}/{{vm.data.pets.length}}</li> <li>Mounts: {{vm.character.mounts.collected.length}}/{{vm.data.mounts.length}}</li> </ul> </div> </div> </div> <pre data-ng-bind="vm.character | json"></pre>'),a.put("pages/tabs/mounts/mounts.html","mounts"),a.put("pages/tabs/pets/pets.html",'<section class="pets"> <!-- FILTERS --> <form class="form-inline"> <div class="col-xs-12 filter-container"> <div class="hidden-lg"> <!-- NAME --> <div class="btn-group"> <input class="form-control" data-ng-model="vm.search" placeholder="search pet names"> </div> </div> <div class="hidden-xs hidden-sm hidden-md"> <!-- NAME --> <div class="btn-group"> <input class="form-control" data-ng-model="vm.search" placeholder="search pet names" style="height:35px"> </div> <!-- COLLECTED --> <div class="btn-group filter-container-collected"> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.original}" data-ng-click="vm.filterCollected()">Have </button> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.uncollected}" data-ng-click="vm.filterUncollected()">Need </button> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.duplicate}" data-ng-click="vm.filterDuplicate()">Extras </button> </div> <!-- QUALITY --> <div class="btn-group filter-container-quality"> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.qualityId==3}" data-ng-click="vm.filterQuality(3)">R </button> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.qualityId==2}" data-ng-click="vm.filterQuality(2)">U </button> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.qualityId==1}" data-ng-click="vm.filterQuality(1)">C/P </button> </div> <!-- LEVEL --> <div class="btn-group filter-container-level"> <div class="input-group"> <div class="input-group-btn"> <button class="btn btn-default" data-ng-click="vm.setLevelMin()">min</button> </div> <select class="form-control" data-ng-model="vm.levelMin" data-ng-options="level.text for level in vm.levelsMin" data-ng-change="vm.filterPets()"> </select> </div> <div class="input-group"> <select class="form-control" data-ng-model="vm.levelMax" data-ng-options="level.text for level in vm.levelsMax" data-ng-change="vm.filterPets()"> </select> <div class="input-group-btn"> <button class="btn btn-default" data-ng-click="vm.setLevelMax()">max</button> </div> </div> </div> <!--&lt;!&ndash; SETTINGS &ndash;&gt;--> <!--<div class="btn-group btn-container-settings">--> <!--<button class="btn btn-default btn-settings"--> <!--data-ng-class="{\'active\':vm.showSettings}"--> <!--data-ng-click="vm.toggleSettings()">--> <!--<img src="images/settings-white.60878437.svg">--> <!--</button>--> <!--</div>--> <!-- PET COUNT --> <div class="input-group filter-container-count"> <label class="form-control"> <strong> <span class="text-danger" data-ng-bind="vm.pets.length"></span> </strong> </label> <span class="input-group-addon">Pets</span> </div> <!-- PETS/PAGE --> <div class="input-group filter-container-tiles"> <div class="input-group-btn"> <button class="btn btn-default" data-ng-click="vm.resetPageSize()"> <img src="images/table.1688e8a0.svg"> </button> </div> <input class="form-control count-input" data-ng-model="vm.pageSize" style="height:35px"> </div> </div> <!--&lt;!&ndash; SETTINGS &ndash;&gt;--> <!--<div class="col-xs-12 filter-container-settings" data-ng-show="vm.showSettings">--> <!--</div>--> </div> </form> <!-- TILES --> <div class="row"> <div class="col-xs-6 col-sm-4 col-md-3" data-dir-paginate="pet in vm.pets | itemsPerPage: vm.pageSize track by $index"> <!-- favorite --> <!--<div class="pet-favorite" data-ng-if="pet.isFavorite" data-ng-include="\'images/favorite.be75fb8e.svg\'"></div>--> <!-- tile --> <!--<div class="clearfix" data-ng-class="vm.getPetTile(pet)">--> <div class="clearfix" data-ng-class="vm.getPetTile(pet)"> <!-- PET NAME --> <div class="row"> <!--<div class="text-center tile-header" title="{{pet.creatureName}}" data-ng-bind="pet.creatureName"></div>--> <div class="text-center tile-header" title="{{pet.creatureName}}" data-ng-bind="pet.name"></div> </div> <!-- PET ICON --> <div class="col-sm-3 tile-body text-center"> <a href="http://www.wowhead.com/npc={{pet.creatureId}}" target="_blank" title="view on wowhead.com"> <img class="icon-{{pet.theme}}" data-ng-src="https://wow.zamimg.com/images/wow/icons/medium/{{pet.icon}}.jpg"> </a> </div> <!-- PET DATA --> <div class="col-sm-9 tile-body"> <!-- STATS --> <div class="col-sm-5"> <div> <span class="battle-icon-health"></span> <span data-ng-bind="pet.stats.health"></span> </div> <div> <span class="battle-icon-power"></span> <span data-ng-bind="pet.stats.power"></span> </div> <div> <span class="battle-icon-speed"></span> <span data-ng-bind="pet.stats.speed"></span> </div> </div> <div class="col-sm-7 text-center"> <!-- LEVEL / BREED --> <div class="level-container"> <div class="level-label">level</div> <div class="level-number"> <strong class="text-{{pet.theme}}" data-ng-bind="pet.stats.level"></strong> <span class="text-{{pet.theme}}" data-ng-bind="vm.breeds[pet.stats.breedId].letters"></span> </div> </div> <!-- FAMILY --> <div data-ng-if="pet.family===\'dragonkin\'" class="family-dragonkin" data-ng-include="\'images/Pet_type_dragonkin.39ab1cf8.svg\'"></div> <div data-ng-if="pet.family===\'magical\'" class="family-magical" data-ng-include="\'images/Pet_type_magical.14a45bea.svg\'"></div> <div data-ng-if="pet.family===\'water\'" class="family-water" data-ng-include="\'images/Pet_type_water.b47c3940.svg\'"></div> <div data-ng-if="pet.family===\'flying\'" class="family-flying" data-ng-include="\'images/Pet_type_flying.c02ecbb0.svg\'"></div> <div data-ng-if="pet.family===\'mechanical\'" class="family-mechanical" data-ng-include="\'images/Pet_type_mechanical.326459e9.svg\'"></div> <div data-ng-if="pet.family===\'undead\'" class="family-undead" data-ng-include="\'images/Pet_type_undead.bde37d7f.svg\'"></div> <div data-ng-if="pet.family===\'beast\'" class="family-beast" data-ng-include="\'images/Pet_type_beast.afe60b81.svg\'"></div> <div data-ng-if="pet.family===\'critter\'" class="family-critter" data-ng-include="\'images/Pet_type_critter.d6d3d65c.svg\'"></div> <div data-ng-if="pet.family===\'elemental\'" class="family-elemental" data-ng-include="\'images/Pet_type_elemental.e839fd78.svg\'"></div> <div data-ng-if="pet.family===\'humanoid\'" class="family-humanoid" data-ng-include="\'images/Pet_type_humanoid.2f3a7246.svg\'"></div> </div> </div> </div> </div> <!-- EMPTY TABLE --> <div data-ng-hide="vm.pets.length"> <div class="col-xs-offset-1 col-xs-10" style="border: 1px dashed grey;border-radius:3px;padding:20px;margin-top:20px"> <h4 class="text-center text-muted"> <strong>I\'m not saying you killed all the pets, but your filters sure made them disappear.</strong> </h4> </div> </div> </div> <!-- PAGING --> <div class="row text-center"> <dir-pagination-controls></dir-pagination-controls> </div> </section>'),a.put("pages/tabs/tabs.html",'<ul class="nav nav-tabs"> <!--<li data-ng-class="{\'active\':vm.tab.character.active}">--> <!--<a ui-sref=".character">{{vm.name}}</a>--> <!--</li>--> <li data-ng-class="{\'active\':vm.tab.pets.active}"> <a ui-sref=".pets">Pets</a> </li> <li data-ng-class="{\'active\':vm.tab.mounts.active}"> <a ui-sref=".mounts">Mounts</a> </li> <li class="disabled" data-ng-class="{\'active\':vm.tab.toys.active}" title="coming soon&#8482;"> <a>Toys</a> </li> </ul> <div ui-view="tab"></div>'),a.put("pages/tabs/toys/toys.html","toys")}]);