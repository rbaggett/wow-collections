!function(){"use strict";angular.module("wcui",["angularUtils.directives.dirPagination","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router"])}(),function(){"use strict";function a(a,b){return b.loadData(a.realm,a.character)}function b(a){return a.loadData()}function c(c,d){d.otherwise("/"),c.state("wcui",{"abstract":!0,resolve:{resolveMasterData:b}}).state("wcui.empty",{url:"/",views:{"wcui@":{templateUrl:"pages/empty/empty.html"}}}).state("wcui.error",{url:"/",views:{"wcui@":{templateUrl:"pages/error/error.html"}}}).state("wcui.tabs",{resolve:{resolveCharacter:a},url:"/:realm/:character",views:{"wcui@":{templateUrl:"pages/tabs/tabs.html",controller:"TabsController",controllerAs:"vm"}}}).state("wcui.tabs.pets",{url:"/pets",views:{"tab@wcui.tabs":{templateUrl:"pages/tabs/pets/pets.html",controller:"PetsController",controllerAs:"vm"}}}).state("wcui.tabs.mounts",{url:"/mounts",views:{"tab@wcui.tabs":{templateUrl:"pages/tabs/mounts/mounts.html",controller:"MountsController",controllerAs:"vm"}}}).state("wcui.tabs.toys",{url:"/toys",views:{"tab@wcui.tabs":{templateUrl:"pages/tabs/toys/toys.html",controller:"ToysController",controllerAs:"vm"}}})}angular.module("wcui").config(c),a.$inject=["$stateParams","characterFactory"],b.$inject=["masterFactory"],c.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){b.go("wcui.empty"),d.loadData(k.realm,k.character).then(i)["catch"](h)}function h(){b.go("wcui.error")}function i(){f.setActiveView(),b.go("wcui.tabs.pets",{realm:k.realm,character:k.character})}function j(){c.realm&&c.character&&(k.realm=stateParams.realm,k.character=stateParams.character,g())}var k=this;k.character="",k.data=e.data,k.realm="",k.getCharacter=g,function(){var c=a.$on("$stateChangeSuccess",function(){console.log("state:",b.current.name)});a.$on("$destory",c),j()}()}angular.module("wcui").controller("HeaderController",a),a.$inject=["$rootScope","$state","$stateParams","characterFactory","masterFactory","utilFactory"]}(),function(){"use strict";function a(a,b){function c(){"wcui.tabs"==a.current.name&&a.go("wcui.tabs.pets")}var d=this;d.tab=b.viewState.tab,function(){c()}()}angular.module("wcui").controller("TabsController",a),a.$inject=["$state","utilFactory"]}(),function(){"use strict";function a(a){!function(){a.setActiveView("mounts")}()}angular.module("wcui").controller("MountsController",a),a.$inject=["utilFactory"]}(),function(){"use strict";function a(a,b,c,d){function e(){q.filters=_.omit(q.filters,["notCollected","duplicate"]),q.filters.original?q.filters=_.omit(q.filters,["original"]):q.filters.original=!0,i()}function f(){q.filters=_.omit(q.filters,["original","notCollected"]),q.filters.duplicate?q.filters=_.omit(q.filters,["duplicate"]):q.filters.duplicate=!0,i()}function g(a){q.filters.stats.level==a?q.filters.stats=_.omit(q.filters.stats,["level"]):q.filters.stats.level=a,i()}function h(){q.filters=_.omit(q.filters,["original","duplicate"]),q.filters.notCollected?q.filters=_.omit(q.filters,["notCollected"]):q.filters.notCollected=!0,i()}function i(){q.pets.length=0,q.pets=q.pets.concat(t),q.pets=_.filter(q.pets,q.filters)}function j(a){q.filters.qualityId==a?q.filters=_.omit(q.filters,["qualityId"]):q.filters.qualityId=a,i()}function k(){var a=-1;a=_.findIndex(q.pets,{creatureId:71021}),a&&(q.pets[a].icon="warlock_summon_-voidlord"),a=_.findIndex(q.pets,{creatureId:83817}),a&&(q.pets[a].icon="inv_pet_-goat"),a=_.findIndex(q.pets,{creatureId:88814}),a&&(q.pets[a].icon="trade_archaeology_draenei-candelabra")}function l(a){var b="tile-"+a.theme;return b+=a.collected?" tile-border-solid":" tile-border-dashed"}function m(a){var b;switch(a.qualityId){case 4:case 3:b="primary";break;case 2:b="success";break;default:b="default"}return b}function n(){for(var a,b,c,d=0,e=s.length;e>d;d++)if(b=angular.copy(s[d]),a=_.filter(r,{creatureId:b.creatureId}),a.length)for(var f=0,g=a.length;g>f;f++)c=angular.copy(_.extend(b,a[f])),c.collected=!0,c.duplicate=f>0,c.notCollected=!1,c.original=0===f,c.theme=m(c),q.pets.push(c);else b.collected=!1,b.creatureName=b.name,b.notCollected=!0,b.theme=m(b),q.pets.push(b)}function o(a){q.pets=_.sortBy(q.pets,a)}function p(){q.showSettings=!q.showSettings}var q=this,r=b.character.pets.collected,s=c.data.pets,t=[];q.breeds=c.data.breeds,q.filters={stats:{}},q.pageSize=24,q.pets=[],q.search="",q.showSettings=!1,q.filterCollected=e,q.filterDuplicate=f,q.filterLevel=g,q.filterNotCollected=h,q.filterPets=i,q.filterQuality=j,q.getPetTile=l,q.toggleSettings=p,function(){n(),k(),o(["creatureName"]),t=t.concat(q.pets),d.setActiveView("pets")}()}angular.module("wcui").controller("PetsController",a),a.$inject=["$scope","characterFactory","masterFactory","utilFactory"]}(),function(){"use strict";function a(a){!function(){a.setActiveView("toys")}()}angular.module("wcui").controller("ToysController",a),a.$inject=["utilFactory"]}(),function(){"use strict";var a={bnetKey:"eedv8cxqvh58re7gmfwhy5bhqbkcgwfh"};angular.module("wcui").constant("constants",a)}(),function(){"use strict";function a(a,b){function c(c,d){var e={method:"GET",url:"https://us.api.battle.net/wow/character/"+c+"/"+d+"?fields=pets,mounts&apikey="+a.bnetKey};return b.request(e)}function d(){var c={method:"GET",url:"https://us.api.battle.net/wow/pet/?fields=species&apikey="+a.bnetKey};return b.request(c)}function e(c,d){var e={method:"GET",url:"https://us.api.battle.net/wow/character/"+c+"/"+d+"?fields=pets&locale=en_US&apikey="+a.bnetKey};return b.request(e)}function f(){var c={method:"GET",url:"https://us.api.battle.net/wow/realm/status?locale=en_US&apikey="+a.bnetKey};return b.request(c)}return{getCharacter:c,getPets:d,getCharacterPets:e,getRealms:f}}angular.module("wcui").factory("bnetFactory",a),a.$inject=["constants","httpFactory"]}(),function(){"use strict";function a(a,b){function c(b,c){return a.getCharacter(b,c).then(e)["catch"](d)}function d(a){throw console.log("loadData failed:"+a),a}function e(a){angular.copy(a.data,f),b.viewState.tab.pets.count=f.pets.collected.length,b.viewState.tab.mounts.count=f.mounts.collected.length,b.viewState.tab.toys.count=0}var f={};return{character:f,loadData:c}}angular.module("wcui").factory("characterFactory",a),a.$inject=["bnetFactory","utilFactory"]}(),function(){"use strict";function a(a,b){function c(c){var f=b.defer();return a(c).success(d(f)).error(e(f)),f.promise}function d(a){return function(b,c,d,e){var f={data:b,status:c,headers:d,config:e};a.resolve(f)}}function e(a){return function(b,c,d,e){var f={data:b,status:c,headers:d,config:e};throw a.reject(f)}}return{request:c}}angular.module("wcui").factory("httpFactory",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b){function c(){return a.all([f(),e(),d(),i()]).then(function(){k.loaded=!0})["catch"](function(){k.loaded=!1})}function d(){}function e(){return b.getPets().then(function(a){k.pets=a.data.pets})}function f(){return b.getRealms().then(g)["catch"](h)}function g(a){k.realms=a.data.realms}function h(a){console.log("loadRealms failed:"+a)}function i(){}var j={4:{letters:"P/P",gender:"male"},14:{letters:"P/P",gender:"female"},5:{letters:"S/S",gender:"male"},15:{letters:"S/S",gender:"female"},6:{letters:"H/H",gender:"male"},16:{letters:"H/H",gender:"female"},7:{letters:"H/P",gender:"male"},17:{letters:"H/P",gender:"female"},8:{letters:"P/S",gender:"male"},18:{letters:"P/S",gender:"female"},9:{letters:"H/S",gender:"male"},19:{letters:"H/S",gender:"female"},10:{letters:"P/B",gender:"male"},20:{letters:"P/B",gender:"female"},11:{letters:"S/B",gender:"male"},21:{letters:"S/B",gender:"female"},12:{letters:"H/B",gender:"male"},22:{letters:"H/B",gender:"female"},3:{letters:"B/B",gender:"male"},13:{letters:"B/B",gender:"female"}},k={breeds:j,loaded:!1,pets:[],mounts:[],realms:[],toys:[]};return{data:k,loadData:c}}angular.module("wcui").factory("masterFactory",a),a.$inject=["$q","bnetFactory"]}(),function(){"use strict";function a(){function a(a){b.tab.pets.active=!1,b.tab.mounts.active=!1,b.tab.toys.active=!1,a&&(b.tab[a].active=!0)}var b={tab:{pets:{active:!1,count:10},mounts:{active:!1,count:0},toys:{active:!1,count:0}}};return{viewState:b,setActiveView:a}}angular.module("wcui").factory("utilFactory",a)}();