!function(){"use strict";angular.module("wowCollectionsUi",["angularUtils.directives.dirPagination","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router"])}(),function(){"use strict";function a(a){return a.loadData()}function b(b,c){c.otherwise("/"),b.state("wcui",{"abstract":!0,resolve:{resolveMasterData:a}}).state("wcui.empty",{url:"/",views:{"wcui@":{templateUrl:"pages/empty/empty.html"}}}).state("wcui.main",{url:"/",views:{"wcui@":{templateUrl:"pages/main/main.html",controller:"MainController",controllerAs:"vm"}}}).state("wcui.main.pets",{url:"",views:{"tab@wcui.main":{templateUrl:"pages/pets/pets.html",controller:"PetsController",controllerAs:"vm"}}}).state("wcui.main.mounts",{url:"",views:{"tab@wcui.main":{templateUrl:"pages/mounts/mounts.html",controller:"MountsController",controllerAs:"vm"}}}).state("wcui.main.toys",{url:"",views:{"tab@wcui.main":{templateUrl:"pages/toys/toys.html",controller:"ToysController",controllerAs:"vm"}}})}angular.module("wowCollectionsUi").config(b),a.$inject=["masterFactory"],b.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function a(a,b,c,d){function e(){b.loadData(g.realm,g.character).then(f)}function f(){d.setActiveView(),a.go("wcui.main")}var g=this;g.realm="dalaran",g.data=c.data,g.character="Thulse",g.getCharacter=e}angular.module("wowCollectionsUi").controller("HeaderController",a),a.$inject=["$state","characterFactory","masterFactory","utilFactory"]}(),function(){"use strict";function a(a,b){var c=this;c.data=a.data,c.viewState=b.viewState}angular.module("wowCollectionsUi").controller("MainController",a),a.$inject=["characterFactory","utilFactory"]}(),function(){"use strict";function a(a){!function(){a.setActiveView("mounts")}()}angular.module("wowCollectionsUi").controller("MountsController",a),a.$inject=["utilFactory"]}(),function(){"use strict";function a(a,b,c,d){function e(){o.filters=_.omit(o.filters,["notCollected","duplicate"]),o.filters.original?o.filters=_.omit(o.filters,["original"]):o.filters.original=!0,h()}function f(){o.filters=_.omit(o.filters,["original","notCollected"]),o.filters.duplicate?o.filters=_.omit(o.filters,["duplicate"]):o.filters.duplicate=!0,h()}function g(){o.filters=_.omit(o.filters,["original","duplicate"]),o.filters.notCollected?o.filters=_.omit(o.filters,["notCollected"]):o.filters.notCollected=!0,h()}function h(){o.pets.length=0,o.pets=o.pets.concat(r),o.pets=_.filter(o.pets,o.filters),console.log(o.pets)}function i(a){}function j(){var a=-1;a=_.findIndex(o.pets,{creatureId:71021}),a&&(o.pets[a].icon="warlock_summon_-voidlord"),a=_.findIndex(o.pets,{creatureId:83817}),a&&(o.pets[a].icon="inv_pet_-goat"),a=_.findIndex(o.pets,{creatureId:88814}),a&&(o.pets[a].icon="trade_archaeology_draenei-candelabra")}function k(a){var b="pet-tile-"+a.theme;return b+=a.collected?" pet-tile-border-solid":" pet-tile-border-dashed"}function l(a){var b;switch(a.qualityId){case 4:case 3:b="primary";break;case 2:b="success";break;default:b="default"}return b}function m(){for(var a,b,c,d=0,e=q.length;e>d;d++)if(b=angular.copy(q[d]),a=_.filter(p,{creatureId:b.creatureId}),a.length)for(var f=0,g=a.length;g>f;f++)c=angular.copy(_.extend(b,a[f])),c.collected=!0,c.duplicate=f>0,c.notCollected=!1,c.original=0===f,c.theme=l(c),o.pets.push(c);else b.collected=!1,b.creatureName=b.name,b.notCollected=!0,b.theme=l(b),o.pets.push(b)}function n(a){o.pets=_.sortBy(o.pets,a)}var o=this,p=b.character.pets.collected,q=c.data.pets,r=[];o.breeds=c.data.breeds,o.filters={},o.pageSize=24,o.pets=[],o.filterCollected=e,o.filterDuplicate=f,o.filterNotCollected=g,o.filterPets=h,o.filterQuality=i,o.getPetTile=k,function(){m(),j(),n(["creatureName"]),r=r.concat(o.pets),d.setActiveView("pets")}()}angular.module("wowCollectionsUi").controller("PetsController",a),a.$inject=["$scope","characterFactory","masterFactory","utilFactory"]}(),function(){"use strict";function a(a){!function(){a.setActiveView("toys")}()}angular.module("wowCollectionsUi").controller("ToysController",a),a.$inject=["utilFactory"]}(),function(){"use strict";var a={bnetKey:"eedv8cxqvh58re7gmfwhy5bhqbkcgwfh"};angular.module("wowCollectionsUi").constant("constants",a)}(),function(){"use strict";function a(a,b){function c(c,d){var e={method:"GET",url:"https://us.api.battle.net/wow/character/"+c+"/"+d+"?fields=pets,mounts&apikey="+a.bnetKey};return b.request(e)}function d(){var c={method:"GET",url:"https://us.api.battle.net/wow/pet/?fields=species&apikey="+a.bnetKey};return b.request(c)}function e(c,d){var e={method:"GET",url:"https://us.api.battle.net/wow/character/"+c+"/"+d+"?fields=pets&locale=en_US&apikey="+a.bnetKey};return b.request(e)}function f(){var c={method:"GET",url:"https://us.api.battle.net/wow/realm/status?locale=en_US&apikey="+a.bnetKey};return b.request(c)}return{getCharacter:c,getPets:d,getCharacterPets:e,getRealms:f}}angular.module("wowCollectionsUi").factory("bnetFactory",a),a.$inject=["constants","httpFactory"]}(),function(){"use strict";function a(a,b){function c(a,c){return b.getCharacter(a,c).then(e)["catch"](d)}function d(a){console.log("loadData failed:"+a)}function e(a){angular.copy(a.data,f)}var f={};return{character:f,loadData:c}}angular.module("wowCollectionsUi").factory("characterFactory",a),a.$inject=["$q","bnetFactory"]}(),function(){"use strict";function a(a,b){function c(c){var f=b.defer();return a(c).success(d(f)).error(e),f.promise}function d(a){return function(b,c,d,e){var f={data:b,status:c,headers:d,config:e};a.resolve(f)}}function e(a){return function(b,c,d,e){var f={data:b,status:c,headers:headers,config:e};a.reject(f)}}return{request:c}}angular.module("wowCollectionsUi").factory("httpFactory",a),a.$inject=["$http","$q"]}(),function(){"use strict";function a(a,b){function c(){return a.all([f(),e(),d(),i()]).then(function(){k.loaded=!0})["catch"](function(){k.loaded=!1})}function d(){}function e(){return b.getPets().then(function(a){k.pets=a.data.pets})}function f(){return b.getRealms().then(g)["catch"](h)}function g(a){k.realms=a.data.realms}function h(a){console.log("loadRealms failed:"+a)}function i(){}var j={4:{letters:"P/P",gender:"male"},14:{letters:"P/P",gender:"female"},5:{letters:"S/S",gender:"male"},15:{letters:"S/S",gender:"female"},6:{letters:"H/H",gender:"male"},16:{letters:"H/H",gender:"female"},7:{letters:"H/P",gender:"male"},17:{letters:"H/P",gender:"female"},8:{letters:"P/S",gender:"male"},18:{letters:"P/S",gender:"female"},9:{letters:"H/S",gender:"male"},19:{letters:"H/S",gender:"female"},10:{letters:"P/B",gender:"male"},20:{letters:"P/B",gender:"female"},11:{letters:"S/B",gender:"male"},21:{letters:"S/B",gender:"female"},12:{letters:"H/B",gender:"male"},22:{letters:"H/B",gender:"female"},3:{letters:"B/B",gender:"male"},13:{letters:"B/B",gender:"female"}},k={breeds:j,loaded:!1,pets:[],mounts:[],realms:[],toys:[]};return{data:k,loadData:c}}angular.module("wowCollectionsUi").factory("masterFactory",a),a.$inject=["$q","bnetFactory"]}(),function(){"use strict";function a(){function a(a){b.tab.pets=!1,b.tab.mounts=!1,b.tab.toys=!1,a&&(b.tab[a]=!0)}var b={tab:{pets:!1,mounts:!1,toys:!1}};return{viewState:b,setActiveView:a}}angular.module("wowCollectionsUi").factory("utilFactory",a)}(),angular.module("wowCollectionsUi").run(["$templateCache",function(a){"use strict";a.put("pages/empty/empty.html",""),a.put("pages/header/header.html",'<nav class="navbar navbar-default"> <form class="navbar-form navbar-center" role="search"> <!--<div class="form-group">--> <select class="form-control" data-ng-model="vm.realm" data-ng-options="realm.slug as realm.name for realm in vm.data.realms" placeholder="character realm"></select> <input class="form-control" data-ng-model="vm.character" placeholder="character name"> <!--</div>--> <button class="btn btn-primary" data-ng-click="vm.getCharacter()">Search</button> </form> </nav>'),a.put("pages/main/main.html",'<ul class="nav nav-tabs"> <li data-ng-class="{\'active\':vm.viewState.tab.pets}"><a ui-sref=".pets">Pets</a></li> <li data-ng-class="{\'active\':vm.viewState.tab.mounts}"><a ui-sref=".mounts">Mounts</a></li> <li class="disabled" data-ng-class="{\'active\':vm.viewState.tab.toys}"><a ui-sref=".toys">Toys</a></li> </ul> <div ui-view="tab"></div>'),a.put("pages/mounts/mounts.html","mounts"),a.put("pages/pets/pets.html",'<section class="pets"> <!--#{{vm.pets.length}}--> <!-- FILTERS --> <div class="row"> <div class="col-xs-12" style="padding-top:10px"> <div class="col-xs-12" style="border-bottom: 1px solid #ddd; padding-bottom: 10px"> <!-- PETS/PAGE --> <div class="col-xs-2"> <div class="input-group"> <span class="input-group-addon">Pets/Page</span> <input class="form-control" data-ng-model="vm.pageSize"> </div> </div> <!-- COLLECTED --> <div class="col-xs-4"> <div class="btn-group"> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.original}" data-ng-click="vm.filterCollected()">Collected</button> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.notCollected}" data-ng-click="vm.filterNotCollected()">Not Collected</button> <button class="btn btn-default" data-ng-class="{\'active\': vm.filters.duplicate}" data-ng-click="vm.filterDuplicate()">Duplicates</button> </div> </div> <!-- QUALITY --> <div class="col-xs-3"> <div> <button class="btn btn-sm btn-primary" data-ng-click="vm.filterQuality(3)" style="width:40px">R</button> <button class="btn btn-sm btn-success" data-ng-click="vm.filterQuality(2)" style="width:40px">U</button> <button class="btn btn-sm btn-default" data-ng-click="vm.filterQuality(1)" style="width:40px">C</button> </div> </div> </div> </div> </div> <!-- TILES --> <div class="row"> <div class="col-xs-6 col-sm-4 col-md-3" data-dir-paginate="pet in vm.pets | itemsPerPage: vm.pageSize track by $index"> <!-- favorite --> <!--<div class="pet-favorite" data-ng-if="pet.isFavorite" data-ng-include="\'images/favorite.be75fb8e.svg\'"></div>--> <!-- tile --> <!--<div class="clearfix" data-ng-class="vm.getPetTile(pet)">--> <div class="clearfix" data-ng-class="vm.getPetTile(pet)"> <!-- NAME --> <div class="row"> <div class="text-center pet-tile-header" title="{{pet.creatureName}}">{{pet.creatureName}}</div> </div> <!-- ICON --> <div class="col-sm-3 pet-tile-body text-center"> <a href="http://www.wowhead.com/npc={{pet.creatureId}}" target="_blank" title="view on wowhead.com"> <img class="pet-icon pet-icon-{{pet.theme}}" data-ng-src="http://wow.zamimg.com/images/wow/icons/medium/{{pet.icon}}.jpg"> </a> </div> <div class="col-sm-9 pet-tile-body"> <!-- STATS --> <div class="col-sm-5"> <div><span class="pet-battle-icon-health"></span>{{pet.stats.health}}</div> <div><span class="pet-battle-icon-power"></span>{{pet.stats.power}}</div> <div><span class="pet-battle-icon-speed"></span>{{pet.stats.speed}}</div> </div> <div class="col-sm-7 text-center"> <!-- LEVEL --> <div class="pet-level-container"> <div class="pet-level-label">level</div> <div class="text-{{pet.theme}} pet-level-number"><strong>{{pet.stats.level}}</strong> {{vm.breeds[pet.stats.breedId].letters}} </div> </div> <!-- FAMILY --> <div data-ng-if="pet.family===\'dragonkin\'" class="pet-family pet-family-dragonkin" data-ng-include="\'images/Pet_type_dragonkin.39ab1cf8.svg\'"></div> <div data-ng-if="pet.family===\'magical\'" class="pet-family pet-family-magical" data-ng-include="\'images/Pet_type_magical.14a45bea.svg\'"></div> <div data-ng-if="pet.family===\'water\'" class="pet-family pet-family-water" data-ng-include="\'images/Pet_type_water.b47c3940.svg\'"></div> <div data-ng-if="pet.family===\'flying\'" class="pet-family pet-family-flying" data-ng-include="\'images/Pet_type_flying.c02ecbb0.svg\'"></div> <div data-ng-if="pet.family===\'mechanical\'" class="pet-family pet-family-mechanical" data-ng-include="\'images/Pet_type_mechanical.326459e9.svg\'"></div> <div data-ng-if="pet.family===\'undead\'" class="pet-family pet-family-undead" data-ng-include="\'images/Pet_type_undead.bde37d7f.svg\'"></div> <div data-ng-if="pet.family===\'beast\'" class="pet-family pet-family-beast" data-ng-include="\'images/Pet_type_beast.afe60b81.svg\'"></div> <div data-ng-if="pet.family===\'critter\'" class="pet-family pet-family-critter" data-ng-include="\'images/Pet_type_critter.d6d3d65c.svg\'"></div> <div data-ng-if="pet.family===\'elemental\'" class="pet-family pet-family-elemental" data-ng-include="\'images/Pet_type_elemental.e839fd78.svg\'"></div> <div data-ng-if="pet.family===\'humanoid\'" class="pet-family pet-family-humanoid" data-ng-include="\'images/Pet_type_humanoid.2f3a7246.svg\'"></div> </div> </div> </div> </div> </div> <!-- PAGING --> <div class="row text-center"> <dir-pagination-controls></dir-pagination-controls> </div> </section>'),a.put("pages/toys/toys.html","toys")}]);