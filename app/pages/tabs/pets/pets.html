<section class="pets">

  <div class="filter-help" data-ng-show="vm.help">
    <span data-ng-bind="vm.help"></span>
  </div>

  <!-- FILTERS -->
  <form class="form-inline">
    <div class="col-xs-12 filter-container text-center">

      <div class="hidden-lg">

        <!-- NAME -->
        <div class="btn-group">
          <input class="form-control" data-ng-model="vm.search" placeholder="search pet names">
        </div>

      </div>


      <div class="hidden-xs hidden-sm hidden-md">

        <!-- NAME -->
        <div class="btn-group">
          <div class="text-muted filter-label">pet name</div>
          <input class="form-control filter-input" data-ng-model="vm.search" placeholder="search pet names">
        </div>

        <!-- COLLECTED -->
        <div class="btn-group filter-container-collected">
          <div class="text-muted filter-label">collecting</div>
          <button class="btn btn-default" title="collected pets only"
                  data-ng-class="{'active': vm.filters.original}"
                  data-ng-click="vm.filterCollected()">Have
          </button>
          <button class="btn btn-default" title="uncollected pets only"
                  data-ng-class="{'active': vm.filters.uncollected}"
                  data-ng-click="vm.filterUncollected()">Need
          </button>
          <button class="btn  btn-default" title="duplicate pets only (does not include the original)"
                  data-ng-class="{'active': vm.filters.duplicate}"
                  data-ng-click="vm.filterDuplicate()">Extras
          </button>
        </div>

        <!-- QUALITY -->
        <div class="btn-group filter-container-quality">
          <div class="text-muted filter-label"
               data-uib-popover-html="vm.tooltips.quality"
               data-popover-trigger="mouseenter">
            <span>rarity</span>
            <i class="glyphicon glyphicon-info-sign"></i>
          </div>
          <button class="btn btn-default" title="rare pets only"
                  data-ng-class="{'active': vm.filters.qualityId==3}"
                  data-ng-click="vm.filterQuality(3)">R
          </button>
          <button class="btn btn-default" title="uncommon pets only"
                  data-ng-class="{'active': vm.filters.qualityId==2}"
                  data-ng-click="vm.filterQuality(2)">U
          </button>
          <button class="btn btn-default" title="common/poor pets only"
                  data-ng-class="{'active': vm.filters.qualityId==1}"
                  data-ng-click="vm.filterQuality(1)">C
          </button>
        </div>

        <!-- LEVEL -->
        <div class="btn-group filter-container-level">
          <div class="text-muted filter-label">
            <!--<div class="text-muted filter-label" data-tooltips data-tooltip-class="tooltip-levels"-->
            <!--data-tooltip-template="Select a min and/or a max level to display pets within a range<br>min/max buttons reset the values to 0/25 respectively">-->
            <span>level range</span>
            <i class="glyphicon glyphicon-info-sign"></i>
          </div>
          <div class="input-group">
            <div class="input-group-btn">
              <button class="btn btn-default" data-ng-click="vm.setLevelMin()">min</button>
            </div>
            <select class="form-control"
                    data-ng-model="vm.levelMin"
                    data-ng-options="level.text for level in vm.levelsMin"
                    data-ng-change="vm.filterPets()">
            </select>
          </div>
          <span>-</span>
          <div class="input-group">
            <select class="form-control"
                    data-ng-model="vm.levelMax"
                    data-ng-options="level.text for level in vm.levelsMax"
                    data-ng-change="vm.filterPets()">
            </select>
            <div class="input-group-btn">
              <button class="btn btn-default" data-ng-click="vm.setLevelMax()">max</button>
            </div>
          </div>
        </div>

        <!-- PET TILES -->
        <div class="btn-group filter-container-tiles">
          <div class="text-muted filter-label"># tiles</div>
          <div class="input-group">
            <div class="input-group-btn">
              <button class="btn btn-default" data-ng-click="vm.resetPageSize()">
                <img src="images/table.svg">
              </button>
            </div>
            <input class="form-control filter-input count-input" data-ng-model="vm.pageSize">
          </div>
        </div>

        <!-- PET COUNT -->
        <div class="btn-group filter-container-count">
          <div class="text-muted filter-label"># filtered</div>
          <div class="input-group">
            <label class="form-control">
              <strong>
                <span class="text-danger count-left" data-ng-bind="vm.pets.length"></span>
              </strong>
            </label>
            <span class="input-group-addon count-right">Pets</span>
          </div>
        </div>


      </div>
    </div>
  </form>


  <!-- TILES -->
  <div class="row">
    <div class="col-xs-6 col-sm-4 col-md-3"
         data-dir-paginate="pet in vm.pets | itemsPerPage: vm.pageSize track by $index">
      <!-- favorite -->
      <!--<div class="pet-favorite" data-ng-if="pet.isFavorite" data-ng-include="'images/favorite.svg'"></div>-->
      <!-- tile -->
      <!--<div class="clearfix" data-ng-class="vm.getPetTile(pet)">-->
      <div class="clearfix" data-ng-class="vm.getPetTile(pet)">

        <!-- PET NAME -->
        <div class="row">
          <!--<div class="text-center tile-header" title="{{pet.creatureName}}" data-ng-bind="pet.creatureName"></div>-->
          <div class="text-center tile-header" title="{{pet.creatureName}}" data-ng-bind="pet.name"></div>
        </div>

        <!-- PET ICON -->
        <div class="col-sm-3 tile-body text-center">
          <a href="http://www.wowhead.com/npc={{pet.creatureId}}" target="_blank" title="view on wowhead.com">
            <img class="icon-{{pet.theme}}"
                 data-ng-src="https://wow.zamimg.com/images/wow/icons/medium/{{pet.icon}}.jpg">
          </a>
        </div>

        <!-- PET DATA -->
        <div class="col-sm-9 tile-body">

          <!-- STATS -->
          <div class="col-sm-5">
            <div>
              <span class="battle-icon-health"></span>
              <span data-ng-bind="pet.stats.health"></span>
            </div>
            <div>
              <span class="battle-icon-power"></span>
              <span data-ng-bind="pet.stats.power"></span>
            </div>
            <div>
              <span class="battle-icon-speed"></span>
              <span data-ng-bind="pet.stats.speed"></span>
            </div>
          </div>

          <div class="col-sm-7 text-center">
            <!-- LEVEL / BREED -->
            <div class="level-container">
              <div class="level-label">level</div>
              <div class="level-number">
                <strong class="text-{{pet.theme}}" data-ng-bind="pet.stats.level"></strong>
                <span class="text-{{pet.theme}}" data-ng-bind="vm.breeds[pet.stats.breedId].letters"></span>
              </div>
            </div>
            <!-- FAMILY -->
            <div data-ng-if="pet.family==='dragonkin'" class="family-dragonkin"
                 data-ng-include="'images/Pet_type_dragonkin.svg'"></div>
            <div data-ng-if="pet.family==='magical'" class="family-magical"
                 data-ng-include="'images/Pet_type_magical.svg'"></div>
            <div data-ng-if="pet.family==='water'" class="family-water"
                 data-ng-include="'images/Pet_type_water.svg'"></div>
            <div data-ng-if="pet.family==='flying'" class="family-flying"
                 data-ng-include="'images/Pet_type_flying.svg'"></div>
            <div data-ng-if="pet.family==='mechanical'" class="family-mechanical"
                 data-ng-include="'images/Pet_type_mechanical.svg'"></div>
            <div data-ng-if="pet.family==='undead'" class="family-undead"
                 data-ng-include="'images/Pet_type_undead.svg'"></div>
            <div data-ng-if="pet.family==='beast'" class="family-beast"
                 data-ng-include="'images/Pet_type_beast.svg'"></div>
            <div data-ng-if="pet.family==='critter'" class="family-critter"
                 data-ng-include="'images/Pet_type_critter.svg'"></div>
            <div data-ng-if="pet.family==='elemental'" class="family-elemental"
                 data-ng-include="'images/Pet_type_elemental.svg'"></div>
            <div data-ng-if="pet.family==='humanoid'" class="family-humanoid"
                 data-ng-include="'images/Pet_type_humanoid.svg'"></div>
          </div>

        </div>
      </div>
    </div>

    <!-- EMPTY TABLE -->
    <div data-ng-hide="vm.pets.length">
      <div class="col-xs-offset-1 col-xs-10"
           style="border: 1px dashed grey;border-radius:3px;padding:20px;margin-top:20px;">
        <h4 class="text-center text-muted">
          <strong>I'm not saying you killed all the pets, but your filters sure made them disappear.</strong>
        </h4>
      </div>
    </div>
  </div>

  <!-- PAGING -->
  <div class="row text-center">
    <dir-pagination-controls></dir-pagination-controls>
  </div>


</section>


